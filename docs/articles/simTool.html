<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The simTool package: Facilitate simulations • simTool</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The simTool package: Facilitate simulations">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simTool</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/simTool.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MarselScheer/simTool">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>The simTool package: Facilitate simulations</h1>
                        <h4 class="author">Marsel Scheer</h4>
            
            <h4 class="date">2019-02-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MarselScheer/simTool/blob/master/vignettes/simTool.Rmd"><code>vignettes/simTool.Rmd</code></a></small>
      <div class="hidden name"><code>simTool.Rmd</code></div>

    </div>

    
    
<style>
p {
    max-width: 940px;
}
</style>
<div id="a-first-example" class="section level1">
<h1 class="hasAnchor">
<a href="#a-first-example" class="anchor"></a>A first example</h1>
<ol style="list-style-type: decimal">
<li>Generate data</li>
<li>Fit different models</li>
<li>Repeat step 1 and 2 three times</li>
<li>Summarize the results with respect to the different data generating functions and models by calculating mean and standard deviation for the corresponding model terms</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">regData &lt;-<span class="st"> </span><span class="cf">function</span>(n, SD) {</a>
<a class="sourceLine" id="cb1-2" title="2">  x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">length =</span> n)</a>
<a class="sourceLine" id="cb1-3" title="3">  y &lt;-<span class="st"> </span><span class="dv">10</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(n, <span class="dt">sd =</span> SD)</a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="kw">tibble</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)</a>
<a class="sourceLine" id="cb1-5" title="5">}</a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"regData"</span>, <span class="dt">n =</span> 5L, <span class="dt">SD =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"lm"</span>, <span class="dt">formula =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"y~x"</span>, <span class="st">"y~I(x^2)"</span>)),</a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="dt">post_analyze =</span> broom<span class="op">::</span>tidy,</a>
<a class="sourceLine" id="cb1-11" title="11">  <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean, <span class="dt">sd =</span> sd),</a>
<a class="sourceLine" id="cb1-12" title="12">  <span class="dt">group_for_summary =</span> <span class="st">"term"</span>,</a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="dt">replications =</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb1-14" title="14">)</a></code></pre></div>
<pre><code># A tibble: 16 x 12
   fun       n    SD replications summary_fun proc  formula term  estimate std.error statistic
   &lt;chr&gt; &lt;int&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 regD…     5     1            1 mean        lm    y~x     (Int…   10.1      0.692     16.5  
 2 regD…     5     1            1 mean        lm    y~x     x        2.92     1.13       3.59 
 3 regD…     5     1            1 mean        lm    y~I(x^… (Int…   10.5      0.544     20.2  
 4 regD…     5     1            1 mean        lm    y~I(x^… I(x^…    2.71     1.04       3.20 
 5 regD…     5     1            1 sd          lm    y~x     (Int…    1.45     0.288      6.89 
 6 regD…     5     1            1 sd          lm    y~x     x        1.84     0.471      3.71 
 7 regD…     5     1            1 sd          lm    y~I(x^… (Int…    1.32     0.185      4.38 
 8 regD…     5     1            1 sd          lm    y~I(x^… I(x^…    2.15     0.352      2.62 
 9 regD…     5     2            1 mean        lm    y~x     (Int…    9.86     1.26       7.85 
10 regD…     5     2            1 mean        lm    y~x     x        3.42     2.05       1.66 
11 regD…     5     2            1 mean        lm    y~I(x^… (Int…   10.6      1.18       8.99 
12 regD…     5     2            1 mean        lm    y~I(x^… I(x^…    2.65     2.24       1.17 
13 regD…     5     2            1 sd          lm    y~x     (Int…    0.209    0.0374     0.393
14 regD…     5     2            1 sd          lm    y~x     x        1.17     0.0610     0.515
15 regD…     5     2            1 sd          lm    y~I(x^… (Int…    0.128    0.0488     0.436
16 regD…     5     2            1 sd          lm    y~I(x^… I(x^…    1.32     0.0927     0.542
# … with 1 more variable: p.value &lt;dbl&gt;
Number of data generating functions: 2
Number of analyzing procedures: 2
Number of replications: 3
Estimated replications per hour: 113037
Start of the simulation: 2019-02-02 00:50:09
End of the simulation: 2019-02-02 00:50:09</code></pre>
</div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The purpose of the <em>simTool</em> package is to disengage the research from any kind of administrative source code which is usually an annoying necessity of a simulation study.</p>
<p>This vignette will give an introduction into the <em>simTool</em> package mainly by examples of growing complexity. The workhorse is the function <em>eval_tibbles</em>. Every parameter of this function will be discussed briefly and the functionality is illustrated by at least one example.</p>
</div>
<div id="workflow" class="section level1">
<h1 class="hasAnchor">
<a href="#workflow" class="anchor"></a>Workflow</h1>
<p>The workflow is quite easy and natural. One defines two <em>data.frames</em> (or <em>tibbles</em>), the first one represents the functions that generate the data sets and the second one represents the functions that analyze the data. These two <em>data.frames</em> are passed to <em>eval_tibbles</em> which conducts the simulation. Afterwards, the results can nicely be displayed as a <em>data.frame</em>.</p>
</div>
<div id="defining-the-data-frames-for-data-generation-and-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-the-data-frames-for-data-generation-and-analysis" class="anchor"></a>Defining the <em>data.frames</em> for data generation and analysis</h1>
<p>There are 3 rules:</p>
<ul>
<li>the first column ( a <em>character</em> vector) defines the functions to be called</li>
<li>the other columns are the parameters that are passed to function specified in the first column</li>
<li>The entry <em>NA</em> will not be passed to the function specified in the first column.</li>
</ul>
<p>The function <em>expand_tibble</em> is a convenient function for defining such <em>data.frames</em>.</p>
<p>We now define the data generation functions for our first simulation.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(dg &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"rexp"</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 20L), <span class="dt">rate =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"rnorm"</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 20L), <span class="dt">mean =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb3-4" title="4">))</a></code></pre></div>
<pre><code># A tibble: 8 x 4
  fun       n  rate  mean
  &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1 rexp     10     1    NA
2 rexp     20     1    NA
3 rexp     10     2    NA
4 rexp     20     2    NA
5 rnorm    10    NA     1
6 rnorm    20    NA     1
7 rnorm    10    NA     2
8 rnorm    20    NA     2</code></pre>
<p>This <em>data.frame</em> represents 8 <em>R</em>-functions. For instance, the second row represents a function that generates 20 exponential distributed random variables with <em>rate</em> 1. Since <em>mean=NA</em> in the second row, this parameter is not passed to <em>rexp</em>.</p>
<p>Similar, we define the <em>data.frame</em> for data analyzing functions.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(pg &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"min"</span>),</a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"mean"</span>, <span class="dt">trim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>))</a>
<a class="sourceLine" id="cb5-4" title="4">))</a></code></pre></div>
<pre><code># A tibble: 3 x 2
  proc   trim
  &lt;chr&gt; &lt;dbl&gt;
1 min    NA  
2 mean    0.1
3 mean    0.2</code></pre>
<p>Hence, this <em>data.frame</em> represents 3 <em>R</em>-functions i.e. calculating the minimum and the arithmetic mean with <em>trim=0.1</em> and <em>trim=0.2</em>.</p>
</div>
<div id="the-workhorse-eval_tibbles" class="section level1">
<h1 class="hasAnchor">
<a href="#the-workhorse-eval_tibbles" class="anchor"></a>The workhorse <em>eval_tibbles</em>
</h1>
<p>The workhorse <em>eval_tibbles</em> has the following simplified pseudo code:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="fl">1.</span>  convert dg to R<span class="op">-</span>functions  {g_<span class="dv">1</span>, ..., g_k} </a>
<a class="sourceLine" id="cb7-2" title="2"><span class="fl">2.</span>  convert pg to R<span class="op">-</span>functions  {f_<span class="dv">1</span>, ..., f_L} </a>
<a class="sourceLine" id="cb7-3" title="3"><span class="fl">3.</span>  initialize result object </a>
<a class="sourceLine" id="cb7-4" title="4"><span class="fl">4.</span>  append dg and pg to the result object </a>
<a class="sourceLine" id="cb7-5" title="5"><span class="fl">5.</span>  t1 =<span class="st"> </span><span class="kw">current.time</span>() </a>
<a class="sourceLine" id="cb7-6" title="6"><span class="fl">6.</span>  <span class="cf">for</span> g <span class="cf">in</span>  {g_<span class="dv">1</span>, ..., g_k} </a>
<a class="sourceLine" id="cb7-7" title="7"><span class="fl">7.</span>      <span class="cf">for</span> r <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/replications">replications</a></span> (optionally <span class="cf">in</span> a parallel manner) </a>
<a class="sourceLine" id="cb7-8" title="8"><span class="fl">8.</span>          data =<span class="st"> </span><span class="kw">g</span>() </a>
<a class="sourceLine" id="cb7-9" title="9"><span class="fl">9.</span>          <span class="cf">for</span> f <span class="cf">in</span>  {f_<span class="dv">1</span>, \ldots, f_L} </a>
<a class="sourceLine" id="cb7-10" title="10"><span class="fl">10.</span>             append <span class="kw">f</span>(data) to the result <span class="kw">object</span> (optionally apply a post<span class="op">-</span>analyze<span class="op">-</span><span class="cf">function</span>)</a>
<a class="sourceLine" id="cb7-11" title="11"><span class="fl">11.</span>         optionally append data to the result object </a>
<a class="sourceLine" id="cb7-12" title="12"><span class="fl">12.</span>      optionally summarize the result object over all  </a>
<a class="sourceLine" id="cb7-13" title="13">         replications but separately <span class="cf">for</span> f_<span class="dv">1</span>, ..., <span class="kw">f_L</span> (and optional group variables)</a>
<a class="sourceLine" id="cb7-14" title="14"><span class="fl">13.</span> t2 =<span class="st"> </span><span class="kw">current.time</span>() </a>
<a class="sourceLine" id="cb7-15" title="15"><span class="fl">14.</span> Estimate the number of replications per hour from t1 and t2 </a></code></pre></div>
<p>The object returned by <em>eval_tibbles</em> is a <em>list</em> of class <em>eval_tibbles</em>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">dg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"rnorm"</span>, <span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">mean =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb8-2" title="2">pg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"min"</span>)</a>
<a class="sourceLine" id="cb8-3" title="3">eg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(<span class="dt">data_grid =</span> dg, <span class="dt">proc_grid =</span> pg, <span class="dt">replications =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb8-4" title="4">eg</a></code></pre></div>
<pre><code># A tibble: 4 x 6
  fun       n  mean replications proc  results
  &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;
1 rnorm    10     1            1 min    -1.75 
2 rnorm    10     1            2 min    -0.212
3 rnorm    10     2            1 min     0.232
4 rnorm    10     2            2 min     1.16 
Number of data generating functions: 2
Number of analyzing procedures: 1
Number of replications: 2
Estimated replications per hour: 59681796
Start of the simulation: 2019-02-02 00:50:09
End of the simulation: 2019-02-02 00:50:09</code></pre>
<p>As you can see, the function always estimates the number of replications that can be done in one hour.</p>
<div id="parameter-replications" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-replications" class="anchor"></a>Parameter <em>replications</em>
</h2>
<p>Of course, this parameter controls the number of replications conducted.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">eg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(<span class="dt">data_grid =</span> dg, <span class="dt">proc_grid =</span> pg, <span class="dt">replications =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb10-2" title="2">eg</a></code></pre></div>
<pre><code># A tibble: 6 x 6
  fun       n  mean replications proc  results
  &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;
1 rnorm    10     1            1 min    -1.30 
2 rnorm    10     1            2 min    -0.574
3 rnorm    10     1            3 min     0.503
4 rnorm    10     2            1 min     0.729
5 rnorm    10     2            2 min     1.06 
6 rnorm    10     2            3 min    -0.272
Number of data generating functions: 2
Number of analyzing procedures: 1
Number of replications: 3
Estimated replications per hour: 70778880
Start of the simulation: 2019-02-02 00:50:09
End of the simulation: 2019-02-02 00:50:09</code></pre>
</div>
<div id="parameter-discard_generated_data" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-discard_generated_data" class="anchor"></a>Parameter <em>discard_generated_data</em>
</h2>
<p><em>eval_tibbles</em> saves ALL generated data sets.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">eg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(<span class="dt">data_grid =</span> dg, <span class="dt">proc_grid =</span> pg, <span class="dt">replications =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb12-2" title="2">eg<span class="op">$</span>simulation</a></code></pre></div>
<pre><code># A tibble: 2 x 6
  fun       n  mean replications proc   results
  &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
1 rnorm    10     1            1 min   -0.554  
2 rnorm    10     2            1 min    0.00499</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">eg<span class="op">$</span>generated_data</a></code></pre></div>
<pre><code>[[1]]
 [1]  1.04382239 -0.02157836  1.79342772  1.50162446 -0.55447035  1.88349784  0.79223220  2.83137401
 [9]  1.17726438  0.19415935

[[2]]
 [1] 3.947932470 2.121197052 1.645050873 3.052866250 3.163113962 1.201167182 2.775455294 0.004992648
 [9] 1.649437807 2.380864742</code></pre>
<p>In general, it is sometimes very handy to have the data sets in order to investigate unusual or unexpected results. But saving the generated data sets can be very memory consuming. Stop saving the generated data sets can be obtained by setting <em>discardGeneratedData = TRUE</em>. See command line 11 in the pseudo code.</p>
</div>
<div id="parameter-summary_fun" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-summary_fun" class="anchor"></a>Parameter <em>summary_fun</em>
</h2>
<p>As stated in command line 12 we can summarize the result objects over all replications but separately for all data analyzing functions.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">dg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"runif"</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>))</a>
<a class="sourceLine" id="cb16-2" title="2">pg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"min"</span>, <span class="st">"max"</span>))</a>
<a class="sourceLine" id="cb16-3" title="3"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb16-4" title="4">  <span class="dt">data_grid =</span> dg, <span class="dt">proc_grid =</span> pg, <span class="dt">replications =</span> <span class="dv">1000</span>,</a>
<a class="sourceLine" id="cb16-5" title="5">  <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean)</a>
<a class="sourceLine" id="cb16-6" title="6">)</a></code></pre></div>
<pre><code># A tibble: 6 x 6
  fun       n replications summary_fun proc   value
  &lt;chr&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 runif    10            1 mean        min   0.0904
2 runif    10            1 mean        max   0.910 
3 runif    20            1 mean        min   0.0486
4 runif    20            1 mean        max   0.953 
5 runif    30            1 mean        min   0.0314
6 runif    30            1 mean        max   0.967 
Number of data generating functions: 3
Number of analyzing procedures: 2
Number of replications: 1000
Estimated replications per hour: 35296923
Start of the simulation: 2019-02-02 00:50:10
End of the simulation: 2019-02-02 00:50:10</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="dt">data_grid =</span> dg, <span class="dt">proc_grid =</span> pg, <span class="dt">replications =</span> <span class="dv">1000</span>,</a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean, <span class="dt">sd =</span> sd)</a>
<a class="sourceLine" id="cb18-4" title="4">)</a></code></pre></div>
<pre><code># A tibble: 12 x 6
   fun       n replications summary_fun proc   value
   &lt;chr&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
 1 runif    10            1 mean        min   0.0930
 2 runif    10            1 mean        max   0.907 
 3 runif    10            1 sd          min   0.0865
 4 runif    10            1 sd          max   0.0860
 5 runif    20            1 mean        min   0.0463
 6 runif    20            1 mean        max   0.952 
 7 runif    20            1 sd          min   0.0425
 8 runif    20            1 sd          max   0.0468
 9 runif    30            1 mean        min   0.0325
10 runif    30            1 mean        max   0.966 
11 runif    30            1 sd          min   0.0323
12 runif    30            1 sd          max   0.0311
Number of data generating functions: 3
Number of analyzing procedures: 2
Number of replications: 1000
Estimated replications per hour: 32334141
Start of the simulation: 2019-02-02 00:50:10
End of the simulation: 2019-02-02 00:50:10</code></pre>
<p>Note, by specifying the parameter <em>summary_fun</em> the generated data sets and all individual result objects are discarded. In this example we discard <span class="math inline">\(3 \times 1000\)</span> data sets and <span class="math inline">\(3 \times 1000 \times 2\)</span> individual result objects.</p>
</div>
<div id="parameter-post_analyze" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-post_analyze" class="anchor"></a>Parameter <em>post_analyze</em>
</h2>
<p>Sometimes the analyzing functions return quite complicated objects like in the Section <em>A first example</em>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb20-2" title="2">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"regData"</span>, <span class="dt">n =</span> 5L, <span class="dt">SD =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb20-3" title="3">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"lm"</span>, <span class="dt">formula =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"y~x"</span>, <span class="st">"y~I(x^2)"</span>)),</a>
<a class="sourceLine" id="cb20-4" title="4">  <span class="dt">replications =</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb20-5" title="5">)</a></code></pre></div>
<pre><code># A tibble: 8 x 7
  fun         n    SD replications proc  formula  results 
  &lt;chr&gt;   &lt;int&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt; &lt;chr&gt;    &lt;list&gt;  
1 regData     5     1            1 lm    y~x      &lt;S3: lm&gt;
2 regData     5     1            1 lm    y~I(x^2) &lt;S3: lm&gt;
3 regData     5     1            2 lm    y~x      &lt;S3: lm&gt;
4 regData     5     1            2 lm    y~I(x^2) &lt;S3: lm&gt;
5 regData     5     2            1 lm    y~x      &lt;S3: lm&gt;
6 regData     5     2            1 lm    y~I(x^2) &lt;S3: lm&gt;
7 regData     5     2            2 lm    y~x      &lt;S3: lm&gt;
8 regData     5     2            2 lm    y~I(x^2) &lt;S3: lm&gt;
Number of data generating functions: 2
Number of analyzing procedures: 2
Number of replications: 2
Estimated replications per hour: 815505
Start of the simulation: 2019-02-02 00:50:10
End of the simulation: 2019-02-02 00:50:10</code></pre>
<p>The parameter <em>post_analyze</em> (if specified) is applied directly after the result was generated (see command line 10). Note, <em>purrr::compose</em> can be very handy if your post-analyzing-function can be defined by a few single functions:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"regData"</span>, <span class="dt">n =</span> 5L, <span class="dt">SD =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb22-3" title="3">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"lm"</span>, <span class="dt">formula =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"y~x"</span>, <span class="st">"y~I(x^2)"</span>)),</a>
<a class="sourceLine" id="cb22-4" title="4">  <span class="dt">post_analyze =</span> purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/compose.html">compose</a></span>(<span class="cf">function</span>(mat) mat[<span class="st">"(Intercept)"</span>, <span class="st">"Estimate"</span>], coef, summary.lm, identity),</a>
<a class="sourceLine" id="cb22-5" title="5">  <span class="dt">replications =</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb22-6" title="6">)</a></code></pre></div>
<pre><code># A tibble: 8 x 7
  fun         n    SD replications proc  formula  results
  &lt;chr&gt;   &lt;int&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
1 regData     5     1            1 lm    y~x        10.3 
2 regData     5     1            1 lm    y~I(x^2)   10.2 
3 regData     5     1            2 lm    y~x         9.43
4 regData     5     1            2 lm    y~I(x^2)    9.95
5 regData     5     2            1 lm    y~x        13.5 
6 regData     5     2            1 lm    y~I(x^2)   13.3 
7 regData     5     2            2 lm    y~x         9.27
8 regData     5     2            2 lm    y~I(x^2)    9.25
Number of data generating functions: 2
Number of analyzing procedures: 2
Number of replications: 2
Estimated replications per hour: 472627
Start of the simulation: 2019-02-02 00:50:10
End of the simulation: 2019-02-02 00:50:10</code></pre>
<p>Note, the function <em>identity</em> used in <em>compose</em> and passed to the parameter <em>post_analyze</em> is only necessary because a bug was introduced in purrr 0.3.0, see <a href="https://github.com/tidyverse/purrr/issues/629">https://github.com/tidyverse/purrr/issues/629</a>. However, one can assume that this will be solved in a future version of purrr.</p>
</div>
<div id="parameter-group_for_summary" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-group_for_summary" class="anchor"></a>Parameter <em>group_for_summary</em>
</h2>
<p>When the result object is a <em>data.frame</em> itself, for instance</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">presever_rownames &lt;-<span class="st"> </span><span class="cf">function</span>(mat) {</a>
<a class="sourceLine" id="cb24-2" title="2">  rn &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">rownames</a></span>(mat)</a>
<a class="sourceLine" id="cb24-3" title="3">  ret &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>(mat)</a>
<a class="sourceLine" id="cb24-4" title="4">  ret<span class="op">$</span>term &lt;-<span class="st"> </span>rn</a>
<a class="sourceLine" id="cb24-5" title="5">  ret</a>
<a class="sourceLine" id="cb24-6" title="6">}</a>
<a class="sourceLine" id="cb24-7" title="7"></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb24-9" title="9">  <span class="kw"><a href="../reference/expandGrid.html">expandGrid</a></span>(<span class="dt">fun =</span> <span class="st">"regData"</span>, <span class="dt">n =</span> 5L, <span class="dt">SD =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb24-10" title="10">  <span class="kw"><a href="../reference/expandGrid.html">expandGrid</a></span>(<span class="dt">proc =</span> <span class="st">"lm"</span>, <span class="dt">formula =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"y~x"</span>, <span class="st">"y~I(x^2)"</span>)),</a>
<a class="sourceLine" id="cb24-11" title="11">  <span class="dt">post_analyze =</span> purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/compose.html">compose</a></span>(presever_rownames, coef, summary, identity),</a>
<a class="sourceLine" id="cb24-12" title="12">  <span class="dt">replications =</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb24-13" title="13">)</a></code></pre></div>
<pre><code>Warning in expandGrid(proc = "lm", formula = c("y~x", "y~I(x^2)")): The function expandGrid() is
deprecated. Please use expand_tibble() instead.</code></pre>
<pre><code>Warning in expandGrid(fun = "regData", n = 5L, SD = 1:2): The function expandGrid() is deprecated.
Please use expand_tibble() instead.</code></pre>
<pre><code># A tibble: 24 x 11
   fun        n    SD replications proc  formula  Estimate `Std. Error` `t value` `Pr(&gt;|t|)` term   
   &lt;chr&gt;  &lt;int&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;  
 1 regDa…     5     1            1 lm    y~x          9.91        0.670    14.8     0.000671 (Inter…
 2 regDa…     5     1            1 lm    y~x          2.80        1.09      2.56    0.0831   x      
 3 regDa…     5     1            1 lm    y~I(x^2)    10.3         0.577    17.9     0.000381 (Inter…
 4 regDa…     5     1            1 lm    y~I(x^2)     2.63        1.10      2.40    0.0961   I(x^2) 
 5 regDa…     5     1            2 lm    y~x          9.32        0.537    17.3     0.000419 (Inter…
 6 regDa…     5     1            2 lm    y~x          2.11        0.878     2.40    0.0960   x      
 7 regDa…     5     1            2 lm    y~I(x^2)     9.78        0.590    16.6     0.000478 (Inter…
 8 regDa…     5     1            2 lm    y~I(x^2)     1.56        1.12      1.39    0.259    I(x^2) 
 9 regDa…     5     1            3 lm    y~x          9.64        1.16      8.28    0.00369  (Inter…
10 regDa…     5     1            3 lm    y~x          1.83        1.90      0.965   0.406    x      
# … with 14 more rows
Number of data generating functions: 2
Number of analyzing procedures: 2
Number of replications: 3
Estimated replications per hour: 393120
Start of the simulation: 2019-02-02 00:50:10
End of the simulation: 2019-02-02 00:50:10</code></pre>
<p>In order to summarize the replications it is necessary to additional group the calculations with respect to another variable. This variable can be passed to <em>group_for_summary</em></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb28-2" title="2">  <span class="kw"><a href="../reference/expandGrid.html">expandGrid</a></span>(<span class="dt">fun =</span> <span class="st">"regData"</span>, <span class="dt">n =</span> 5L, <span class="dt">SD =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb28-3" title="3">  <span class="kw"><a href="../reference/expandGrid.html">expandGrid</a></span>(<span class="dt">proc =</span> <span class="st">"lm"</span>, <span class="dt">formula =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"y~x"</span>, <span class="st">"y~I(x^2)"</span>)),</a>
<a class="sourceLine" id="cb28-4" title="4">  <span class="dt">post_analyze =</span> purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/compose.html">compose</a></span>(presever_rownames, coef, summary, identity),</a>
<a class="sourceLine" id="cb28-5" title="5">  <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean, <span class="dt">sd =</span> sd),</a>
<a class="sourceLine" id="cb28-6" title="6">  <span class="dt">group_for_summary =</span> <span class="st">"term"</span>,</a>
<a class="sourceLine" id="cb28-7" title="7">  <span class="dt">replications =</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb28-8" title="8">)</a></code></pre></div>
<pre><code>Warning in expandGrid(proc = "lm", formula = c("y~x", "y~I(x^2)")): The function expandGrid() is
deprecated. Please use expand_tibble() instead.</code></pre>
<pre><code>Warning in expandGrid(fun = "regData", n = 5L, SD = 1:2): The function expandGrid() is deprecated.
Please use expand_tibble() instead.</code></pre>
<pre><code># A tibble: 16 x 12
   fun       n    SD replications summary_fun proc  formula term  Estimate `Std. Error` `t value`
   &lt;chr&gt; &lt;int&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;
 1 regD…     5     1            1 mean        lm    y~x     (Int…    9.95         0.500     53.5 
 2 regD…     5     1            1 mean        lm    y~x     x        2.04         0.817      6.86
 3 regD…     5     1            1 mean        lm    y~I(x^… (Int…   10.3          0.444     28.5 
 4 regD…     5     1            1 mean        lm    y~I(x^… I(x^…    1.93         0.845      2.80
 5 regD…     5     1            1 sd          lm    y~x     (Int…    0.505        0.404     66.9 
 6 regD…     5     1            1 sd          lm    y~x     x        0.382        0.660      8.87
 7 regD…     5     1            1 sd          lm    y~I(x^… (Int…    0.608        0.202     17.8 
 8 regD…     5     1            1 sd          lm    y~I(x^… I(x^…    0.759        0.385      1.87
 9 regD…     5     2            1 mean        lm    y~x     (Int…    9.38         0.787     13.6 
10 regD…     5     2            1 mean        lm    y~x     x        3.28         1.28       2.80
11 regD…     5     2            1 mean        lm    y~I(x^… (Int…    9.99         0.823     14.1 
12 regD…     5     2            1 mean        lm    y~I(x^… I(x^…    2.74         1.57       1.79
13 regD…     5     2            1 sd          lm    y~x     (Int…    1.06         0.271      7.18
14 regD…     5     2            1 sd          lm    y~x     x        3.14         0.443      2.41
15 regD…     5     2            1 sd          lm    y~I(x^… (Int…    0.862        0.365      6.91
16 regD…     5     2            1 sd          lm    y~I(x^… I(x^…    2.74         0.694      1.73
# … with 1 more variable: `Pr(&gt;|t|)` &lt;dbl&gt;
Number of data generating functions: 2
Number of analyzing procedures: 2
Number of replications: 3
Estimated replications per hour: 202851
Start of the simulation: 2019-02-02 00:50:11
End of the simulation: 2019-02-02 00:50:11</code></pre>
</div>
<div id="parameter-ncpus-and-cluster_seed" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-ncpus-and-cluster_seed" class="anchor"></a>Parameter <em>ncpus</em> and <em>cluster_seed</em>
</h2>
<p>By specifying <em>ncpus</em> larger than 1 a cluster objected is created for the user and passed to the parameter <em>cluster</em> discussed in the next section.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb32-2" title="2">  <span class="dt">data_grid =</span> dg, <span class="dt">proc_grid =</span> pg, <span class="dt">replications =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb32-3" title="3">  <span class="dt">ncpus =</span> <span class="dv">2</span>, <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean)</a>
<a class="sourceLine" id="cb32-4" title="4">)</a></code></pre></div>
<pre><code># A tibble: 6 x 6
  fun       n replications summary_fun proc   value
  &lt;chr&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 runif    10            1 mean        min   0.0884
2 runif    10            1 mean        max   0.912 
3 runif    20            1 mean        min   0.0656
4 runif    20            1 mean        max   0.947 
5 runif    30            1 mean        min   0.0362
6 runif    30            1 mean        max   0.969 
Number of data generating functions: 3
Number of analyzing procedures: 2
Number of replications: 10
Estimated replications per hour: 84330
Start of the simulation: 2019-02-02 00:50:11
End of the simulation: 2019-02-02 00:50:12</code></pre>
<p>As it is stated in command line 7, the replications are parallelized. In our case, this means that roughly every CPU conducts 5 replications.</p>
<p>The parameter <em>cluster_seed</em> must be an integer vector of length 6 and serves the same purpose as the function <em>set.seed</em>. By default, <em>cluster_seed</em> equals <em>rep(12345, 6)</em>. Note, in order to reproduce the simulation study it is also necessary that <em>ncpus</em> does not change.</p>
</div>
<div id="parameter-cluster" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-cluster" class="anchor"></a>Parameter <em>cluster</em>
</h2>
<p>The user can create a cluster on its own. This also enables the user to distribute the replications over different computers in a network.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(parallel)</a>
<a class="sourceLine" id="cb34-2" title="2">cl &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/parallel/topics/makeCluster">makeCluster</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="st">"localhost"</span>, <span class="dv">2</span>), <span class="dt">type =</span> <span class="st">"PSOCK"</span>)</a>
<a class="sourceLine" id="cb34-3" title="3"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(</a>
<a class="sourceLine" id="cb34-4" title="4">  <span class="dt">data_grid =</span> dg, <span class="dt">proc_grid =</span> pg, <span class="dt">replications =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb34-5" title="5">  <span class="dt">cluster =</span> cl, <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean)</a>
<a class="sourceLine" id="cb34-6" title="6">)</a></code></pre></div>
<pre><code># A tibble: 6 x 6
  fun       n replications summary_fun proc   value
  &lt;chr&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 runif    10            1 mean        min   0.0884
2 runif    10            1 mean        max   0.912 
3 runif    20            1 mean        min   0.0656
4 runif    20            1 mean        max   0.947 
5 runif    30            1 mean        min   0.0362
6 runif    30            1 mean        max   0.969 
Number of data generating functions: 3
Number of analyzing procedures: 2
Number of replications: 10
Estimated replications per hour: 84275
Start of the simulation: 2019-02-02 00:50:12
End of the simulation: 2019-02-02 00:50:13</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/parallel/topics/makeCluster">stopCluster</a></span>(cl)</a></code></pre></div>
<p>As you can see our cluster consists of 3 workers. Hence, this reproduces the results from the last code chunk above. Further note, if the user starts the cluster, the user also has to stop the cluster. A cluster that is created within <em>eval_tibbles</em> by specifying <em>ncpus</em> is also stop within <em>eval_tibbles</em>.</p>
</div>
<div id="parameter-cluster_libraries-and-cluster_global_objects" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-cluster_libraries-and-cluster_global_objects" class="anchor"></a>Parameter <em>cluster_libraries</em> and <em>cluster_global_objects</em>
</h2>
<p>A newly created cluster is ``empty’’. Hence, if the simulation study requires libraries or objects from the global environment, they must be transferred to the cluster.</p>
<p>Lets look at standard example from the <em>boot</em> package.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(boot)</a>
<a class="sourceLine" id="cb37-2" title="2">ratio &lt;-<span class="st"> </span><span class="cf">function</span>(d, w) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(d<span class="op">$</span>x <span class="op">*</span><span class="st"> </span>w) <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(d<span class="op">$</span>u <span class="op">*</span><span class="st"> </span>w)</a>
<a class="sourceLine" id="cb37-3" title="3">city.boot &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/boot/topics/boot">boot</a></span>(city, ratio,</a>
<a class="sourceLine" id="cb37-4" title="4">  <span class="dt">R =</span> <span class="dv">999</span>, <span class="dt">stype =</span> <span class="st">"w"</span>,</a>
<a class="sourceLine" id="cb37-5" title="5">  <span class="dt">sim =</span> <span class="st">"ordinary"</span></a>
<a class="sourceLine" id="cb37-6" title="6">)</a>
<a class="sourceLine" id="cb37-7" title="7"><span class="kw"><a href="https://www.rdocumentation.org/packages/boot/topics/boot.ci">boot.ci</a></span>(city.boot,</a>
<a class="sourceLine" id="cb37-8" title="8">  <span class="dt">conf =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.90</span>, <span class="fl">0.95</span>),</a>
<a class="sourceLine" id="cb37-9" title="9">  <span class="dt">type =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"norm"</span>, <span class="st">"basic"</span>, <span class="st">"perc"</span>, <span class="st">"bca"</span>)</a>
<a class="sourceLine" id="cb37-10" title="10">)</a></code></pre></div>
<pre><code>BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS
Based on 999 bootstrap replicates

CALL : 
boot.ci(boot.out = city.boot, conf = c(0.9, 0.95), type = c("norm", 
    "basic", "perc", "bca"))

Intervals : 
Level      Normal              Basic         
90%   ( 1.145,  1.831 )   ( 1.106,  1.752 )   
95%   ( 1.079,  1.896 )   ( 0.966,  1.791 )  

Level     Percentile            BCa          
90%   ( 1.289,  1.935 )   ( 1.289,  1.933 )   
95%   ( 1.250,  2.075 )   ( 1.250,  2.077 )  
Calculations and Intervals on Original Scale</code></pre>
<p>The following data generating function is extremely boring because it always returns the data set <em>city</em> from the library <em>boot</em>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1">returnCity &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb39-2" title="2">  city</a>
<a class="sourceLine" id="cb39-3" title="3">}</a>
<a class="sourceLine" id="cb39-4" title="4">bootConfInt &lt;-<span class="st"> </span><span class="cf">function</span>(data) {</a>
<a class="sourceLine" id="cb39-5" title="5">  city.boot &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/boot/topics/boot">boot</a></span>(data, ratio,</a>
<a class="sourceLine" id="cb39-6" title="6">    <span class="dt">R =</span> <span class="dv">999</span>, <span class="dt">stype =</span> <span class="st">"w"</span>,</a>
<a class="sourceLine" id="cb39-7" title="7">    <span class="dt">sim =</span> <span class="st">"ordinary"</span></a>
<a class="sourceLine" id="cb39-8" title="8">  )</a>
<a class="sourceLine" id="cb39-9" title="9">  <span class="kw"><a href="https://www.rdocumentation.org/packages/boot/topics/boot.ci">boot.ci</a></span>(city.boot,</a>
<a class="sourceLine" id="cb39-10" title="10">    <span class="dt">conf =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.90</span>, <span class="fl">0.95</span>),</a>
<a class="sourceLine" id="cb39-11" title="11">    <span class="dt">type =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"norm"</span>, <span class="st">"basic"</span>, <span class="st">"perc"</span>, <span class="st">"bca"</span>)</a>
<a class="sourceLine" id="cb39-12" title="12">  )</a>
<a class="sourceLine" id="cb39-13" title="13">}</a></code></pre></div>
<p>The function <em>ratio</em> exists at the moment only in our global environment. Further we had to load the <em>boot</em> package. Hence, we load the <em>boot</em> package by setting <em>cluster_libraries = c(“boot”)</em> and transfer the function <em>ratio</em> by setting <em>cluster_global_objects = c(“ratio”)</em>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1">dg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"returnCity"</span>)</a>
<a class="sourceLine" id="cb40-2" title="2">pg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"bootConfInt"</span>)</a>
<a class="sourceLine" id="cb40-3" title="3"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg,</a>
<a class="sourceLine" id="cb40-4" title="4">  <span class="dt">replications =</span> <span class="dv">10</span>, <span class="dt">ncpus =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb40-5" title="5">  <span class="dt">cluster_libraries =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"boot"</span>),</a>
<a class="sourceLine" id="cb40-6" title="6">  <span class="dt">cluster_global_objects =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"ratio"</span>)</a>
<a class="sourceLine" id="cb40-7" title="7">)</a></code></pre></div>
<pre><code># A tibble: 10 x 4
   fun        replications proc        results     
   &lt;chr&gt;             &lt;int&gt; &lt;chr&gt;       &lt;list&gt;      
 1 returnCity            1 bootConfInt &lt;S3: bootci&gt;
 2 returnCity            2 bootConfInt &lt;S3: bootci&gt;
 3 returnCity            3 bootConfInt &lt;S3: bootci&gt;
 4 returnCity            4 bootConfInt &lt;S3: bootci&gt;
 5 returnCity            5 bootConfInt &lt;S3: bootci&gt;
 6 returnCity            6 bootConfInt &lt;S3: bootci&gt;
 7 returnCity            7 bootConfInt &lt;S3: bootci&gt;
 8 returnCity            8 bootConfInt &lt;S3: bootci&gt;
 9 returnCity            9 bootConfInt &lt;S3: bootci&gt;
10 returnCity           10 bootConfInt &lt;S3: bootci&gt;
Number of data generating functions: 1
Number of analyzing procedures: 1
Number of replications: 10
Estimated replications per hour: 119766
Start of the simulation: 2019-02-02 00:50:13
End of the simulation: 2019-02-02 00:50:14</code></pre>
<p>Of course, it is possible to set <em>cluster_global_objects=ls()</em>, but then all objects from the global environment are transferred to all workers.</p>
</div>
<div id="parameter-envir" class="section level2">
<h2 class="hasAnchor">
<a href="#parameter-envir" class="anchor"></a>Parameter <em>envir</em>
</h2>
<p>The function <em>eval_tibbles</em> generates in a first step function calls from <em>data_grid</em> and <em>proc_grid</em>. This is achieved by applying the <em>R</em>-function <em>get</em>. By default, <em>envir=globalenv()</em> and thus <em>get</em> searches the global environment of the current R session. An example shows how to use the parameter <em>envir</em>.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="co"># masking summary from the base package</span></a>
<a class="sourceLine" id="cb42-2" title="2">summary &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">tibble</span>(<span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x))</a>
<a class="sourceLine" id="cb42-3" title="3">g &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">tibble</span>(<span class="dt">q0.1 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/quantile">quantile</a></span>(x, <span class="fl">0.1</span>))</a>
<a class="sourceLine" id="cb42-4" title="4">someFunc &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb42-5" title="5">  summary &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">tibble</span>(<span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(x), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x))</a>
<a class="sourceLine" id="cb42-6" title="6"></a>
<a class="sourceLine" id="cb42-7" title="7">  dg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"runif"</span>, <span class="dt">n =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb42-8" title="8">  pg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"summary"</span>, <span class="st">"g"</span>))</a>
<a class="sourceLine" id="cb42-9" title="9"></a>
<a class="sourceLine" id="cb42-10" title="10">  <span class="co"># the standard is to use the global</span></a>
<a class="sourceLine" id="cb42-11" title="11">  <span class="co"># environment, hence summary defined outside</span></a>
<a class="sourceLine" id="cb42-12" title="12">  <span class="co"># of someFunc() will be used</span></a>
<a class="sourceLine" id="cb42-13" title="13">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg))</a>
<a class="sourceLine" id="cb42-14" title="14">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cat">cat</a></span>(<span class="st">"--------------------------------------------------</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb42-15" title="15">  <span class="co"># will use the local defined summary, but g</span></a>
<a class="sourceLine" id="cb42-16" title="16">  <span class="co"># from the global environment, because</span></a>
<a class="sourceLine" id="cb42-17" title="17">  <span class="co"># g is not locally defined.</span></a>
<a class="sourceLine" id="cb42-18" title="18">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg, <span class="dt">envir =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/environment">environment</a></span>()))</a>
<a class="sourceLine" id="cb42-19" title="19">}</a>
<a class="sourceLine" id="cb42-20" title="20"><span class="kw">someFunc</span>()</a></code></pre></div>
<pre><code># A tibble: 2 x 6
  fun       n replications proc        sd   q0.1
  &lt;chr&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;
1 runif   100            1 summary  0.287 NA    
2 runif   100            1 g       NA      0.151
Number of data generating functions: 1
Number of analyzing procedures: 2
Number of replications: 1
Estimated replications per hour: 2337383
Start of the simulation: 2019-02-02 00:50:14
End of the simulation: 2019-02-02 00:50:14
--------------------------------------------------
# A tibble: 2 x 7
  fun       n replications proc        sd   mean   q0.1
  &lt;chr&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 runif   100            1 summary  0.276  0.513 NA    
2 runif   100            1 g       NA     NA      0.126
Number of data generating functions: 1
Number of analyzing procedures: 2
Number of replications: 1
Estimated replications per hour: 2561841
Start of the simulation: 2019-02-02 00:50:14
End of the simulation: 2019-02-02 00:50:14</code></pre>
</div>
<div id="truth-functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#truth-functionality" class="anchor"></a>.truth-functionality</h2>
<p>Sometimes it is handy to access the parameter constellation that was used during the data generation in the (post) data analyzing phase. Of course, one could write wrapper functions for every data generating function and append the parameter constellation from the data generation as attributes to the data set, but the purpose of this package is to reduce such administrative source code. Hence if the (post) data analyzing function has an argument <em>.truth</em>, then <em>eval_tibbles</em> will manage that hand-over. A brief example should explain this. Suppose we want to estimate the bias of the empirical quantile estimator if the data is normal distributed.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1">dg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"rnorm"</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>,<span class="dv">1000</span>), <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>,<span class="dv">10</span>), <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 100L))</a>
<a class="sourceLine" id="cb44-2" title="2">pg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"quantile"</span>, <span class="dt">probs =</span> <span class="fl">0.975</span>)</a>
<a class="sourceLine" id="cb44-3" title="3">post_ana &lt;-<span class="st"> </span><span class="cf">function</span>(q_est, .truth){</a>
<a class="sourceLine" id="cb44-4" title="4">  tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">bias =</span> q_est <span class="op">-</span><span class="st"> </span>stats<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">qnorm</a></span>(<span class="fl">0.975</span>, <span class="dt">mean =</span> .truth<span class="op">$</span>mean, <span class="dt">sd =</span> .truth<span class="op">$</span>sd))</a>
<a class="sourceLine" id="cb44-5" title="5">}</a>
<a class="sourceLine" id="cb44-6" title="6"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg, <span class="dt">replications =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">3</span>, <span class="dt">discard_generated_data =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb44-7" title="7">                   <span class="dt">ncpus =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb44-8" title="8">                   <span class="dt">post_analyze =</span> post_ana,</a>
<a class="sourceLine" id="cb44-9" title="9">                   <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean))</a></code></pre></div>
<pre><code># A tibble: 8 x 9
  fun    mean    sd     n replications summary_fun proc     probs    bias
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;
1 rnorm     1     1    10            1 mean        quantile 0.975 -0.573 
2 rnorm  1000     1    10            1 mean        quantile 0.975 -0.550 
3 rnorm     1    10    10            1 mean        quantile 0.975 -5.58  
4 rnorm  1000    10    10            1 mean        quantile 0.975 -5.34  
5 rnorm     1     1   100            1 mean        quantile 0.975 -0.0760
6 rnorm  1000     1   100            1 mean        quantile 0.975 -0.0879
7 rnorm     1    10   100            1 mean        quantile 0.975 -0.685 
8 rnorm  1000    10   100            1 mean        quantile 0.975 -0.695 
Number of data generating functions: 8
Number of analyzing procedures: 1
Number of replications: 1000
Estimated replications per hour: 1084848
Start of the simulation: 2019-02-02 00:50:15
End of the simulation: 2019-02-02 00:50:18</code></pre>
<p>If we want to do the analysis for different distrubtions we could modify our post data analyzing function, but we can also simply add a <em>.truth</em>-column to the data generating grid. In this case, the information from the <em>.truth</em>-column is directly passed to the <em>.truth</em>-parameter:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1">dg &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</a>
<a class="sourceLine" id="cb46-2" title="2">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"rnorm"</span>), <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 100L), <span class="dt">.truth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">qnorm</a></span>(<span class="fl">0.975</span>)),</a>
<a class="sourceLine" id="cb46-3" title="3">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"rexp"</span>), <span class="dt">rate =</span> <span class="dv">1</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 100L), <span class="dt">.truth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Exponential">qexp</a></span>(<span class="fl">0.975</span>, <span class="dt">rate =</span> <span class="dv">1</span>)),</a>
<a class="sourceLine" id="cb46-4" title="4">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"runif"</span>), <span class="dt">max =</span> <span class="dv">2</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 100L), <span class="dt">.truth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">qunif</a></span>(<span class="fl">0.975</span>, <span class="dt">max =</span> <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb46-5" title="5">)</a>
<a class="sourceLine" id="cb46-6" title="6">pg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"quantile"</span>, <span class="dt">probs =</span> <span class="fl">0.975</span>)</a>
<a class="sourceLine" id="cb46-7" title="7">post_ana &lt;-<span class="st"> </span><span class="cf">function</span>(q_est, .truth){</a>
<a class="sourceLine" id="cb46-8" title="8">  ret &lt;-<span class="st"> </span>q_est <span class="op">-</span><span class="st"> </span>.truth</a>
<a class="sourceLine" id="cb46-9" title="9">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(ret) &lt;-<span class="st"> "bias"</span></a>
<a class="sourceLine" id="cb46-10" title="10">  ret</a>
<a class="sourceLine" id="cb46-11" title="11">}</a>
<a class="sourceLine" id="cb46-12" title="12"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg, <span class="dt">replications =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">3</span>, <span class="dt">discard_generated_data =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb46-13" title="13">                   <span class="dt">ncpus =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb46-14" title="14">                   <span class="dt">post_analyze =</span> post_ana,</a>
<a class="sourceLine" id="cb46-15" title="15">                   <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean))</a></code></pre></div>
<pre><code># A tibble: 6 x 11
  fun    mean     n .truth  rate   max replications summary_fun proc     probs    bias
  &lt;chr&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;
1 rnorm     0    10   1.96    NA    NA            1 mean        quantile 0.975 -0.573 
2 rnorm     0   100   1.96    NA    NA            1 mean        quantile 0.975 -0.0818
3 rexp     NA    10   3.69     1    NA            1 mean        quantile 0.975 -0.917 
4 rexp     NA   100   3.69     1    NA            1 mean        quantile 0.975 -0.175 
5 runif    NA    10   1.95    NA     2            1 mean        quantile 0.975 -0.174 
6 runif    NA   100   1.95    NA     2            1 mean        quantile 0.975 -0.0183
Number of data generating functions: 6
Number of analyzing procedures: 1
Number of replications: 1000
Estimated replications per hour: 2908030
Start of the simulation: 2019-02-02 00:50:18
End of the simulation: 2019-02-02 00:50:20</code></pre>
<p>In the same fashion one could write a data analyzing function with a parameter <em>.truth</em>. To go even a step further, we store the analytic quantile function in the <em>.truth</em> column:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1">dg &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</a>
<a class="sourceLine" id="cb48-2" title="2">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"rnorm"</span>), <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 1000L), </a>
<a class="sourceLine" id="cb48-3" title="3">                <span class="dt">.truth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="cf">function</span>(prob) <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">qnorm</a></span>(prob, <span class="dt">mean =</span> <span class="dv">0</span>))),</a>
<a class="sourceLine" id="cb48-4" title="4">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"rexp"</span>), <span class="dt">rate =</span> <span class="dv">1</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 1000L),</a>
<a class="sourceLine" id="cb48-5" title="5">                <span class="dt">.truth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="cf">function</span>(prob) <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Exponential">qexp</a></span>(prob, <span class="dt">rate =</span> <span class="dv">1</span>))),</a>
<a class="sourceLine" id="cb48-6" title="6">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"runif"</span>), <span class="dt">max =</span> <span class="dv">2</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 1000L),</a>
<a class="sourceLine" id="cb48-7" title="7">                <span class="dt">.truth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="cf">function</span>(prob) <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">qunif</a></span>(prob, <span class="dt">max =</span> <span class="dv">2</span>)))</a>
<a class="sourceLine" id="cb48-8" title="8">)</a>
<a class="sourceLine" id="cb48-9" title="9">bias_quantile &lt;-<span class="st"> </span><span class="cf">function</span>(x, prob, .truth) {</a>
<a class="sourceLine" id="cb48-10" title="10">  est &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/quantile">quantile</a></span>(x, <span class="dt">probs =</span> prob)</a>
<a class="sourceLine" id="cb48-11" title="11">  ret &lt;-<span class="st"> </span>est <span class="op">-</span><span class="st"> </span>.truth[[<span class="dv">1</span>]](prob)</a>
<a class="sourceLine" id="cb48-12" title="12">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(ret) &lt;-<span class="st"> "bias"</span></a>
<a class="sourceLine" id="cb48-13" title="13">  ret</a>
<a class="sourceLine" id="cb48-14" title="14">}</a>
<a class="sourceLine" id="cb48-15" title="15">pg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="st">"bias_quantile"</span>, <span class="dt">prob =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.9</span>, <span class="fl">0.975</span>))</a>
<a class="sourceLine" id="cb48-16" title="16"><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg, <span class="dt">replications =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">3</span>, <span class="dt">discard_generated_data =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb48-17" title="17">                   <span class="dt">ncpus =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb48-18" title="18">                   <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean))</a></code></pre></div>
<pre><code># A tibble: 12 x 11
   fun    mean     n .truth  rate   max replications summary_fun proc           prob     bias
   &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;list&gt; &lt;dbl&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt;
 1 rnorm     0    10 &lt;fn&gt;      NA    NA            1 mean        bias_quantile 0.9   -0.217  
 2 rnorm     0    10 &lt;fn&gt;      NA    NA            1 mean        bias_quantile 0.975 -0.525  
 3 rnorm     0  1000 &lt;fn&gt;      NA    NA            1 mean        bias_quantile 0.9   -0.00193
 4 rnorm     0  1000 &lt;fn&gt;      NA    NA            1 mean        bias_quantile 0.975 -0.00753
 5 rexp     NA    10 &lt;fn&gt;       1    NA            1 mean        bias_quantile 0.9   -0.307  
 6 rexp     NA    10 &lt;fn&gt;       1    NA            1 mean        bias_quantile 0.975 -0.969  
 7 rexp     NA  1000 &lt;fn&gt;       1    NA            1 mean        bias_quantile 0.9   -0.00517
 8 rexp     NA  1000 &lt;fn&gt;       1    NA            1 mean        bias_quantile 0.975 -0.0164 
 9 runif    NA    10 &lt;fn&gt;      NA     2            1 mean        bias_quantile 0.9   -0.136  
10 runif    NA    10 &lt;fn&gt;      NA     2            1 mean        bias_quantile 0.975 -0.172  
11 runif    NA  1000 &lt;fn&gt;      NA     2            1 mean        bias_quantile 0.9   -0.00170
12 runif    NA  1000 &lt;fn&gt;      NA     2            1 mean        bias_quantile 0.975 -0.00152
Number of data generating functions: 6
Number of analyzing procedures: 2
Number of replications: 1000
Estimated replications per hour: 1652212
Start of the simulation: 2019-02-02 00:50:20
End of the simulation: 2019-02-02 00:50:22</code></pre>
<p>But one should keep in mind that if one calculates the quantile during the (post) analyzing phase that this is happens on replication level. To be more precise lets look at an excerpt of the pseudo code from the beginning of the vignette:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="fl">6.</span>  <span class="cf">for</span> g <span class="cf">in</span>  {g_<span class="dv">1</span>, ..., g_k} </a>
<a class="sourceLine" id="cb50-2" title="2"><span class="fl">7.</span>      <span class="cf">for</span> r <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/replications">replications</a></span> (optionally <span class="cf">in</span> a parallel manner) </a>
<a class="sourceLine" id="cb50-3" title="3"><span class="fl">8.</span>          data =<span class="st"> </span><span class="kw">g</span>() </a>
<a class="sourceLine" id="cb50-4" title="4"><span class="fl">9.</span>          <span class="cf">for</span> f <span class="cf">in</span>  {f_<span class="dv">1</span>, \ldots, f_L} </a>
<a class="sourceLine" id="cb50-5" title="5"><span class="fl">10.</span>             append <span class="kw">f</span>(data) to the result <span class="kw">object</span> (optionally apply a post<span class="op">-</span>analyze<span class="op">-</span><span class="cf">function</span>)</a></code></pre></div>
<p>No matter if one extend the data analyzing function <em>f_1, … f_L</em> or the post-analyze-function with an argument <em>.truth</em> the calculation are made for every single replication during step 10. Hence, the operations are not vectorized!</p>
</div>
</div>
<div id="some-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#some-examples" class="anchor"></a>Some Examples</h1>
<p>Note, the following code examples will use more computational resources. In order to prevent that these are checked/executed on the CRAN check farm, they are only evaluated if the environment variable <em>NOT_CRAN</em> is set to “true”</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1">EVAL &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb51-2" title="2"><span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"NOT_CRAN"</span>) <span class="op">==</span><span class="st"> "true"</span>) {</a>
<a class="sourceLine" id="cb51-3" title="3">  EVAL &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb51-4" title="4">}</a></code></pre></div>
<div id="sampling-distribution-of-mean-and-median-for-normal-and-exponential-distributed-data" class="section level2">
<h2 class="hasAnchor">
<a href="#sampling-distribution-of-mean-and-median-for-normal-and-exponential-distributed-data" class="anchor"></a>Sampling distribution of mean and median for normal and exponential distributed data</h2>
<p>First we define how the data is generated, where the sample size should be 10 and 100:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1">dg &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</a>
<a class="sourceLine" id="cb52-2" title="2">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"rnorm"</span>), <span class="dt">mean =</span> <span class="dv">1</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 100L)),</a>
<a class="sourceLine" id="cb52-3" title="3">  <span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"rexp"</span>), <span class="dt">rate =</span> <span class="dv">1</span>, <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(10L, 100L))</a>
<a class="sourceLine" id="cb52-4" title="4">)</a>
<a class="sourceLine" id="cb52-5" title="5">dg</a></code></pre></div>
<pre><code># A tibble: 4 x 4
  fun    mean     n  rate
  &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
1 rnorm     1    10    NA
2 rnorm     1   100    NA
3 rexp     NA    10     1
4 rexp     NA   100     1</code></pre>
<p>Afterwards we define how we want to analyze the data:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1">pg &lt;-<span class="st"> </span><span class="kw"><a href="../reference/expand_tibble.html">expand_tibble</a></span>(<span class="dt">proc =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"mean"</span>, <span class="st">"median"</span>))</a>
<a class="sourceLine" id="cb54-2" title="2">pg</a></code></pre></div>
<pre><code># A tibble: 2 x 1
  proc  
  &lt;chr&gt; 
1 mean  
2 median</code></pre>
<p>Finally, we conduct the simulation and visualize the results</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1">et &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg, <span class="dt">replications =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">5</span>, <span class="dt">ncpus =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb56-2" title="2">et</a></code></pre></div>
<pre><code># A tibble: 800,000 x 7
   fun    mean     n  rate replications proc   results
   &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt;
 1 rnorm     1    10    NA            1 mean     0.616
 2 rnorm     1    10    NA            1 median   0.463
 3 rnorm     1    10    NA            2 mean     0.884
 4 rnorm     1    10    NA            2 median   0.796
 5 rnorm     1    10    NA            3 mean     1.36 
 6 rnorm     1    10    NA            3 median   1.08 
 7 rnorm     1    10    NA            4 mean     0.355
 8 rnorm     1    10    NA            4 median   0.347
 9 rnorm     1    10    NA            5 mean     0.514
10 rnorm     1    10    NA            5 median   0.414
# … with 799,990 more rows
Number of data generating functions: 4
Number of analyzing procedures: 2
Number of replications: 100000
Estimated replications per hour: 18869556
Start of the simulation: 2019-02-02 00:50:23
End of the simulation: 2019-02-02 00:50:42</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">et<span class="op">$</span>simulation <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb58-2" title="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> results, <span class="dt">color =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/interaction">interaction</a></span>(fun, n), <span class="dt">fill =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/interaction">interaction</a></span>(fun, n))) <span class="op">+</span></a>
<a class="sourceLine" id="cb58-3" title="3"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">alpha =</span> <span class="fl">0.3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb58-4" title="4"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>proc)</a></code></pre></div>
<p><img src="simTool_files/figure-html/unnamed-chunk-27-1.png" width="700"></p>
</div>
<div id="comparing-bootstrap-confidence-intervals-with-classical-studentized-interval" class="section level2">
<h2 class="hasAnchor">
<a href="#comparing-bootstrap-confidence-intervals-with-classical-studentized-interval" class="anchor"></a>Comparing bootstrap confidence intervals with classical studentized interval</h2>
<p>We want to compare the confidence intervals that are generated by <em>boot::boot.ci()</em> and <em>stats::t.test()</em>. Unfortunately, <em>boot::boot.ci()</em> cannot be applied directly to the generated data sets. Therefore, we write a new function:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1">bootstrap_ci &lt;-<span class="st"> </span><span class="cf">function</span>(x, conf.level, <span class="dt">R =</span> <span class="dv">999</span>) {</a>
<a class="sourceLine" id="cb59-2" title="2">  b &lt;-<span class="st"> </span>boot<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/boot/topics/boot">boot</a></span>(x, <span class="cf">function</span>(d, i) {</a>
<a class="sourceLine" id="cb59-3" title="3">    n &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(i)</a>
<a class="sourceLine" id="cb59-4" title="4">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(</a>
<a class="sourceLine" id="cb59-5" title="5">      <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(d[i]),</a>
<a class="sourceLine" id="cb59-6" title="6">      <span class="dt">variance =</span> (n <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/cor">var</a></span>(d[i]) <span class="op">/</span><span class="st"> </span>n<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb59-7" title="7">    )</a>
<a class="sourceLine" id="cb59-8" title="8">  }, <span class="dt">R =</span> R)</a>
<a class="sourceLine" id="cb59-9" title="9">  boot<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/boot/topics/boot.ci">boot.ci</a></span>(b, <span class="dt">conf =</span> conf.level, <span class="dt">type =</span> <span class="st">"all"</span>)</a>
<a class="sourceLine" id="cb59-10" title="10">}</a></code></pre></div>
<p>Furthermore, <em>boot::boot.ci()</em> returns in general more than one confidence interval and the structures returned by <em>boot::boot.ci()</em> and <em>stats::t.test()</em> are also very different. One solution could be to write a function <em>t_test()</em> that calls <em>stats::t.test()</em>, modifies the returned object and additionally modify the function <em>bootstrap_ci</em> so that both function return objects with a unified structure. But instead of that we will implement a function that is later on passed to the argument <em>post_analyze</em> of <em>eval_tibbles</em>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">post_analyze &lt;-<span class="st"> </span><span class="cf">function</span>(o, .truth) {</a>
<a class="sourceLine" id="cb60-2" title="2">  <span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/class">class</a></span>(o) <span class="op">==</span><span class="st"> "htest"</span>) {</a>
<a class="sourceLine" id="cb60-3" title="3">  <span class="co">#post-process the object returned by t.test</span></a>
<a class="sourceLine" id="cb60-4" title="4">    ci &lt;-<span class="st"> </span>o<span class="op">$</span>conf.int</a>
<a class="sourceLine" id="cb60-5" title="5">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span>(tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb60-6" title="6">      <span class="dt">type =</span> <span class="st">"t.test"</span>,</a>
<a class="sourceLine" id="cb60-7" title="7">      <span class="dt">aspect =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"covered"</span>, <span class="st">"ci_length"</span>),</a>
<a class="sourceLine" id="cb60-8" title="8">      <span class="dt">value =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(ci[<span class="dv">1</span>] <span class="op">&lt;=</span><span class="st"> </span>.truth <span class="op">&amp;&amp;</span><span class="st"> </span>.truth <span class="op">&lt;=</span><span class="st"> </span>ci[<span class="dv">2</span>], ci[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>ci[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb60-9" title="9">    ))</a>
<a class="sourceLine" id="cb60-10" title="10">  } <span class="cf">else</span> <span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/class">class</a></span>(o) <span class="op">==</span><span class="st"> "bootci"</span>) {</a>
<a class="sourceLine" id="cb60-11" title="11">  <span class="co">#post-process the object returned by boot.ci</span></a>
<a class="sourceLine" id="cb60-12" title="12">    method =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"normal"</span>, <span class="st">"basic"</span>, <span class="st">"student"</span>, <span class="st">"percent"</span>, <span class="st">"bca"</span>)</a>
<a class="sourceLine" id="cb60-13" title="13">    ret =<span class="st"> </span>o[method]</a>
<a class="sourceLine" id="cb60-14" title="14">    lower =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unlist">unlist</a></span>(purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(ret, <span class="op">~</span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/nth.html">nth</a></span>(.x, <span class="dv">-2</span>)))</a>
<a class="sourceLine" id="cb60-15" title="15">    upper =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(ret, dplyr<span class="op">::</span>last)</a>
<a class="sourceLine" id="cb60-16" title="16">    type =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">"boot"</span>, method, <span class="dt">sep =</span> <span class="st">"_"</span>)</a>
<a class="sourceLine" id="cb60-17" title="17"></a>
<a class="sourceLine" id="cb60-18" title="18">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span>(</a>
<a class="sourceLine" id="cb60-19" title="19">      dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</a>
<a class="sourceLine" id="cb60-20" title="20">      tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb60-21" title="21">        <span class="dt">type =</span> type, </a>
<a class="sourceLine" id="cb60-22" title="22">        <span class="dt">aspect =</span> <span class="st">"covered"</span>, </a>
<a class="sourceLine" id="cb60-23" title="23">        <span class="dt">value =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/integer">as.integer</a></span>(lower <span class="op">&lt;=</span><span class="st"> </span>.truth <span class="op">&amp;</span><span class="st"> </span>.truth <span class="op">&lt;=</span><span class="st"> </span>upper)),</a>
<a class="sourceLine" id="cb60-24" title="24">      tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb60-25" title="25">        <span class="dt">type =</span> type, </a>
<a class="sourceLine" id="cb60-26" title="26">        <span class="dt">aspect =</span> <span class="st">"ci_length"</span>, </a>
<a class="sourceLine" id="cb60-27" title="27">        <span class="dt">value =</span> upper <span class="op">-</span><span class="st"> </span>lower))</a>
<a class="sourceLine" id="cb60-28" title="28">    )</a>
<a class="sourceLine" id="cb60-29" title="29">  }</a>
<a class="sourceLine" id="cb60-30" title="30">}</a></code></pre></div>
<p>As you can see, the objects returned are tibbles with more than one row. Summarizing the data over all replications will in general use the variable <em>type</em> and <em>aspect</em> as grouping variables. This can be achieved by using the parameter <em>group_for_summary</em> of <em>eval_tibbles</em>.</p>
<div id="define-and-run-the-simulation" class="section level3">
<h3 class="hasAnchor">
<a href="#define-and-run-the-simulation" class="anchor"></a>Define and run the simulation</h3>
<p>We want to generate normal-, uniform-, and exponential distributed data:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1">dg &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</a>
<a class="sourceLine" id="cb61-2" title="2">  simTool<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/simTool/topics/expand_tibble">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"rnorm"</span>, <span class="dt">n =</span> 10L, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="dv">3</span>), <span class="dt">.truth =</span> <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb61-3" title="3">  simTool<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/simTool/topics/expand_tibble">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"runif"</span>, <span class="dt">n =</span> 10L, <span class="dt">max =</span> <span class="dv">6</span>, <span class="dt">.truth =</span> <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb61-4" title="4">  simTool<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/simTool/topics/expand_tibble">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"rexp"</span>, <span class="dt">n =</span> 10L, <span class="dt">rate =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="dv">3</span>), <span class="dt">.truth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb61-5" title="5">)</a>
<a class="sourceLine" id="cb61-6" title="6">dg</a></code></pre></div>
<pre><code># A tibble: 3 x 7
  fun       n  mean    sd .truth   max   rate
  &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1 rnorm    10     0  1.73   0       NA NA    
2 runif    10    NA NA      3        6 NA    
3 rexp     10    NA NA      1.73    NA  0.577</code></pre>
<p>and apply our functions that calculate the confidence intervals to it using two different confidence levels.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1">pg &lt;-<span class="st"> </span>simTool<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/simTool/topics/expand_tibble">expand_tibble</a></span>(</a>
<a class="sourceLine" id="cb63-2" title="2">  <span class="dt">proc =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"t.test"</span>,<span class="st">"bootstrap_ci"</span>),</a>
<a class="sourceLine" id="cb63-3" title="3">  <span class="dt">conf.level =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.9</span>, <span class="fl">0.95</span>)</a>
<a class="sourceLine" id="cb63-4" title="4">)</a>
<a class="sourceLine" id="cb63-5" title="5">pg</a></code></pre></div>
<pre><code># A tibble: 4 x 2
  proc         conf.level
  &lt;chr&gt;             &lt;dbl&gt;
1 t.test             0.9 
2 bootstrap_ci       0.9 
3 t.test             0.95
4 bootstrap_ci       0.95</code></pre>
<p>Note, that the structure of the objects returned are quite different which addressed by our function <em>post_analyze</em>. The variables <em>type</em> and <em>aspect</em> that are created by <em>post_analyze</em> are to distinguish the different confidence intervals. Since these variables are part of the result objects, <em>eval_tibbles</em> assumes that these variables are results. In order to summarize the results (calculating the mean) over all replications correctly we need to tell eval_tibbles that additional group variables are <em>type</em> and <em>aspect</em>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1">et &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg,</a>
<a class="sourceLine" id="cb65-2" title="2">  <span class="dt">replications =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">3</span>, <span class="dt">ncpus =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb65-3" title="3">  <span class="dt">cluster_global_objects =</span> <span class="st">"post_analyze"</span>,</a>
<a class="sourceLine" id="cb65-4" title="4">  <span class="dt">post_analyze =</span> post_analyze,</a>
<a class="sourceLine" id="cb65-5" title="5">  <span class="dt">summary_fun =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">mean =</span> mean),</a>
<a class="sourceLine" id="cb65-6" title="6">  <span class="dt">group_for_summary =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"aspect"</span>, <span class="st">"type"</span>)</a>
<a class="sourceLine" id="cb65-7" title="7">)</a>
<a class="sourceLine" id="cb65-8" title="8">et</a></code></pre></div>
<pre><code># A tibble: 72 x 14
   fun       n  mean    sd .truth   max  rate replications summary_fun proc  conf.level aspect type 
   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;
 1 rnorm    10     0  1.73      0    NA    NA            1 mean        t.te…        0.9 ci_le… t.te…
 2 rnorm    10     0  1.73      0    NA    NA            1 mean        t.te…        0.9 cover… t.te…
 3 rnorm    10     0  1.73      0    NA    NA            1 mean        boot…        0.9 ci_le… boot…
 4 rnorm    10     0  1.73      0    NA    NA            1 mean        boot…        0.9 ci_le… boot…
 5 rnorm    10     0  1.73      0    NA    NA            1 mean        boot…        0.9 ci_le… boot…
 6 rnorm    10     0  1.73      0    NA    NA            1 mean        boot…        0.9 ci_le… boot…
 7 rnorm    10     0  1.73      0    NA    NA            1 mean        boot…        0.9 ci_le… boot…
 8 rnorm    10     0  1.73      0    NA    NA            1 mean        boot…        0.9 cover… boot…
 9 rnorm    10     0  1.73      0    NA    NA            1 mean        boot…        0.9 cover… boot…
10 rnorm    10     0  1.73      0    NA    NA            1 mean        boot…        0.9 cover… boot…
# … with 62 more rows, and 1 more variable: value &lt;dbl&gt;
Number of data generating functions: 3
Number of analyzing procedures: 4
Number of replications: 1000
Estimated replications per hour: 15642
Start of the simulation: 2019-02-02 00:50:48
End of the simulation: 2019-02-02 00:54:38</code></pre>
<p>Finally, we can visualize the summarized results:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1">et<span class="op">$</span>simulation <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb67-2" title="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> fun, <span class="dt">y =</span> value, <span class="dt">group =</span> type, <span class="dt">fill =</span> type, <span class="dt">label =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(value, <span class="dv">2</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb67-3" title="3"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">position =</span> <span class="st">"dodge"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb67-4" title="4"><span class="st">  </span><span class="kw">geom_label</span>(<span class="dt">position =</span> <span class="kw">position_dodge</span>(<span class="fl">0.9</span>), <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb67-5" title="5"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"bottom"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb67-6" title="6"><span class="st">  </span><span class="kw">facet_grid</span>(aspect <span class="op">~</span><span class="st"> </span>conf.level, <span class="dt">scales =</span> <span class="st">"free"</span>)</a></code></pre></div>
<p><img src="simTool_files/figure-html/unnamed-chunk-33-1.png" width="1248"></p>
</div>
<div id="a-different-implementation" class="section level3">
<h3 class="hasAnchor">
<a href="#a-different-implementation" class="anchor"></a>A different implementation</h3>
<p>Here we briefly realize the simulation differently by leveraging data analyzing functions with unified return-objects:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">t_test =<span class="st"> </span><span class="cf">function</span>(x, conf.level){</a>
<a class="sourceLine" id="cb68-2" title="2">  tt &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/t.test">t.test</a></span>(x, <span class="dt">conf.level =</span> conf.level)</a>
<a class="sourceLine" id="cb68-3" title="3">  </a>
<a class="sourceLine" id="cb68-4" title="4">  <span class="co"># unify return</span></a>
<a class="sourceLine" id="cb68-5" title="5">  tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">type =</span> <span class="st">"t.test"</span>, <span class="dt">lower =</span> tt<span class="op">$</span>conf.int[<span class="dv">1</span>], <span class="dt">upper =</span> tt<span class="op">$</span>conf.int[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb68-6" title="6">}</a>
<a class="sourceLine" id="cb68-7" title="7"></a>
<a class="sourceLine" id="cb68-8" title="8">bootstrap_ci &lt;-<span class="st"> </span><span class="cf">function</span>(x, conf.level, <span class="dt">R =</span> <span class="dv">999</span>) {</a>
<a class="sourceLine" id="cb68-9" title="9">  b &lt;-<span class="st"> </span>boot<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/boot/topics/boot">boot</a></span>(x, <span class="cf">function</span>(d, i) {</a>
<a class="sourceLine" id="cb68-10" title="10">    n &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(i)</a>
<a class="sourceLine" id="cb68-11" title="11">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(</a>
<a class="sourceLine" id="cb68-12" title="12">      <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(d[i]),</a>
<a class="sourceLine" id="cb68-13" title="13">      <span class="dt">variance =</span> (n <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/cor">var</a></span>(d[i]) <span class="op">/</span><span class="st"> </span>n<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb68-14" title="14">    )</a>
<a class="sourceLine" id="cb68-15" title="15">  }, <span class="dt">R =</span> R)</a>
<a class="sourceLine" id="cb68-16" title="16">  ci &lt;-<span class="st"> </span>boot<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/boot/topics/boot.ci">boot.ci</a></span>(b, <span class="dt">conf =</span> conf.level, <span class="dt">type =</span> <span class="st">"all"</span>)</a>
<a class="sourceLine" id="cb68-17" title="17">  method =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"normal"</span>, <span class="st">"basic"</span>, <span class="st">"student"</span>, <span class="st">"percent"</span>, <span class="st">"bca"</span>)</a>
<a class="sourceLine" id="cb68-18" title="18">  ret =<span class="st"> </span>ci[method]</a>
<a class="sourceLine" id="cb68-19" title="19">  lower =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unlist">unlist</a></span>(purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(ret, <span class="op">~</span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/nth.html">nth</a></span>(.x, <span class="dv">-2</span>)))</a>
<a class="sourceLine" id="cb68-20" title="20">  upper =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(ret, dplyr<span class="op">::</span>last)</a>
<a class="sourceLine" id="cb68-21" title="21">  type =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">"boot"</span>, method, <span class="dt">sep =</span> <span class="st">"_"</span>)</a>
<a class="sourceLine" id="cb68-22" title="22">  </a>
<a class="sourceLine" id="cb68-23" title="23">  <span class="co"># unify return</span></a>
<a class="sourceLine" id="cb68-24" title="24">  tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">type =</span> type, <span class="dt">lower =</span> lower, <span class="dt">upper =</span> upper)</a>
<a class="sourceLine" id="cb68-25" title="25">}</a>
<a class="sourceLine" id="cb68-26" title="26"></a>
<a class="sourceLine" id="cb68-27" title="27">dg &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(</a>
<a class="sourceLine" id="cb68-28" title="28">  simTool<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/simTool/topics/expand_tibble">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"rnorm"</span>, <span class="dt">n =</span> 10L, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="dv">3</span>), <span class="dt">.truth =</span> <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb68-29" title="29">  simTool<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/simTool/topics/expand_tibble">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"runif"</span>, <span class="dt">n =</span> 10L, <span class="dt">max =</span> <span class="dv">6</span>, <span class="dt">.truth =</span> <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb68-30" title="30">  simTool<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/simTool/topics/expand_tibble">expand_tibble</a></span>(<span class="dt">fun =</span> <span class="st">"rexp"</span>, <span class="dt">n =</span> 10L, <span class="dt">rate =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="dv">3</span>), <span class="dt">.truth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb68-31" title="31">)</a>
<a class="sourceLine" id="cb68-32" title="32"></a>
<a class="sourceLine" id="cb68-33" title="33">pg &lt;-<span class="st"> </span>simTool<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/simTool/topics/expand_tibble">expand_tibble</a></span>(</a>
<a class="sourceLine" id="cb68-34" title="34">  <span class="dt">proc =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"t_test"</span>,<span class="st">"bootstrap_ci"</span>),</a>
<a class="sourceLine" id="cb68-35" title="35">  <span class="dt">conf.level =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.9</span>, <span class="fl">0.95</span>)</a>
<a class="sourceLine" id="cb68-36" title="36">) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb68-37" title="37"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">R =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ifelse">ifelse</a></span>(proc <span class="op">==</span><span class="st"> "bootstrap_ci"</span>, <span class="dv">100</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb68-38" title="38"></a>
<a class="sourceLine" id="cb68-39" title="39">et &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eval_tibbles.html">eval_tibbles</a></span>(dg, pg,</a>
<a class="sourceLine" id="cb68-40" title="40">  <span class="dt">replications =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">2</span>, <span class="dt">ncpus =</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb68-41" title="41">)</a>
<a class="sourceLine" id="cb68-42" title="42">et</a></code></pre></div>
<pre><code># A tibble: 3,600 x 14
   fun       n  mean    sd .truth   max  rate replications proc  conf.level     R type  lower
   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;        &lt;int&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
 1 rnorm    10     0  1.73      0    NA    NA            1 t_te…       0.9     NA t.te… -1.56
 2 rnorm    10     0  1.73      0    NA    NA            1 boot…       0.9    100 boot… -1.44
 3 rnorm    10     0  1.73      0    NA    NA            1 boot…       0.9    100 boot… -1.40
 4 rnorm    10     0  1.73      0    NA    NA            1 boot…       0.9    100 boot… -1.57
 5 rnorm    10     0  1.73      0    NA    NA            1 boot…       0.9    100 boot… -1.50
 6 rnorm    10     0  1.73      0    NA    NA            1 boot…       0.9    100 boot… -1.57
 7 rnorm    10     0  1.73      0    NA    NA            1 t_te…       0.95    NA t.te… -1.77
 8 rnorm    10     0  1.73      0    NA    NA            1 boot…       0.95   100 boot… -1.54
 9 rnorm    10     0  1.73      0    NA    NA            1 boot…       0.95   100 boot… -1.63
10 rnorm    10     0  1.73      0    NA    NA            1 boot…       0.95   100 boot… -1.83
# … with 3,590 more rows, and 1 more variable: upper &lt;dbl&gt;
Number of data generating functions: 3
Number of analyzing procedures: 4
Number of replications: 100
Estimated replications per hour: 80735
Start of the simulation: 2019-02-02 00:54:40
End of the simulation: 2019-02-02 00:54:44</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1">grps &lt;-<span class="st"> </span>et<span class="op">$</span>simulation <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-2" title="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>replications) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-3" title="3"><span class="st">  </span><span class="kw">select</span>(fun<span class="op">:</span>type) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-4" title="4"><span class="st">  </span>names</a>
<a class="sourceLine" id="cb70-5" title="5"></a>
<a class="sourceLine" id="cb70-6" title="6">et<span class="op">$</span>simulation <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">covered =</span> lower <span class="op">&lt;=</span><span class="st"> </span>.truth <span class="op">&amp;</span><span class="st"> </span>.truth <span class="op">&lt;=</span><span class="st"> </span>upper,</a>
<a class="sourceLine" id="cb70-8" title="8">         <span class="dt">ci_length =</span> upper <span class="op">-</span><span class="st"> </span>lower) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-9" title="9"><span class="st">  </span><span class="kw">group_by_</span>(<span class="dt">.dots =</span> grps) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-10" title="10"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">coverage =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(covered),</a>
<a class="sourceLine" id="cb70-11" title="11">            <span class="dt">ci_length =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(ci_length))</a></code></pre></div>
<pre><code># A tibble: 36 x 13
# Groups:   fun, n, mean, sd, .truth, max, rate, proc, conf.level, R [?]
   fun       n  mean    sd .truth   max  rate proc      conf.level     R type     coverage ci_length
   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
 1 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.9    100 boot_ba…     0.76      1.54
 2 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.9    100 boot_bca     0.85      1.65
 3 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.9    100 boot_no…     0.79      1.51
 4 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.9    100 boot_pe…     0.82      1.54
 5 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.9    100 boot_st…     0.91      2.32
 6 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.95   100 boot_ba…     0.86      1.87
 7 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.95   100 boot_bca     0.88      1.97
 8 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.95   100 boot_no…     0.87      1.83
 9 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.95   100 boot_pe…     0.88      1.87
10 rexp     10    NA    NA   1.73    NA 0.577 bootstra…       0.95   100 boot_st…     0.95      3.30
# … with 26 more rows</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#a-first-example">A first example</a></li>
      <li><a href="#introduction">Introduction</a></li>
      <li><a href="#workflow">Workflow</a></li>
      <li><a href="#defining-the-data-frames-for-data-generation-and-analysis">Defining the <em>data.frames</em> for data generation and analysis</a></li>
      <li>
<a href="#the-workhorse-eval_tibbles">The workhorse <em>eval_tibbles</em></a><ul class="nav nav-pills nav-stacked">
<li><a href="#parameter-replications">Parameter <em>replications</em></a></li>
      <li><a href="#parameter-discard_generated_data">Parameter <em>discard_generated_data</em></a></li>
      <li><a href="#parameter-summary_fun">Parameter <em>summary_fun</em></a></li>
      <li><a href="#parameter-post_analyze">Parameter <em>post_analyze</em></a></li>
      <li><a href="#parameter-group_for_summary">Parameter <em>group_for_summary</em></a></li>
      <li><a href="#parameter-ncpus-and-cluster_seed">Parameter <em>ncpus</em> and <em>cluster_seed</em></a></li>
      <li><a href="#parameter-cluster">Parameter <em>cluster</em></a></li>
      <li><a href="#parameter-cluster_libraries-and-cluster_global_objects">Parameter <em>cluster_libraries</em> and <em>cluster_global_objects</em></a></li>
      <li><a href="#parameter-envir">Parameter <em>envir</em></a></li>
      <li><a href="#truth-functionality">.truth-functionality</a></li>
      </ul>
</li>
      <li>
<a href="#some-examples">Some Examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#sampling-distribution-of-mean-and-median-for-normal-and-exponential-distributed-data">Sampling distribution of mean and median for normal and exponential distributed data</a></li>
      <li><a href="#comparing-bootstrap-confidence-intervals-with-classical-studentized-interval">Comparing bootstrap confidence intervals with classical studentized interval</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Marsel Scheer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
